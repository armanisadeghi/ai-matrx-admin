const errors = require('../../public/type_errors.json');

const byFile = {};
errors.forEach(e => {
  if (e.file && e.code === 2307) {
    const normalizedFile = e.file.startsWith('/home/arman/projects/ai-matrx-admin/') 
      ? e.file.substring('/home/arman/projects/ai-matrx-admin/'.length)
      : e.file;
    if (!byFile[normalizedFile]) byFile[normalizedFile] = [];
    byFile[normalizedFile].push(e);
  }
});

const singleErrorFiles = Object.entries(byFile)
  .filter(([file, errs]) => errs.length === 1)
  .map(([file]) => file)
  .sort();

// ALL processed files from all batches (comprehensive list)
const allProcessed = new Set([
  // Original batches 1-10
  'constants/chat.ts', 'providers/toast-context.tsx', 'providers/layout/Breadcrumbs.tsx',
  'app/entities/fields/types.ts', 'app/entities/forms/EntityFormMinimal.tsx',
  'app/entities/hooks/crud/useDirectCreateRecord.ts', 'app/entities/fields/field-management.tsx',
  'app/entities/fields/EntityRelationshipInput.tsx', 'app/entities/fields/field-components/add-ons/JsonEditor.tsx',
  'app/entities/fields/field-components/relationship-fields/custom-fk-config.ts',
  'app/entities/fields/field-components/relationship-fields/custom/FieldComponentsFkCustom.tsx',
  'app/entities/fields/field-components/relationship-fields/CustomFkHandler.tsx',
  'app/entities/fields/field-components/relationship-fields/EntityForeignKeySelect.tsx',
  'app/entities/fields/field-components/relationship-fields/EntitySearchableFkSelect.tsx',
  'app/entities/forms/EntityFormMinimalAnyRecord.tsx',
  'app/(authenticated)/apps/custom/[slug]/[appletSlug]/AppletPageClient.tsx',
  'app/(authenticated)/demo/many-to-many-ui/claude/RelationshipMaker.tsx',
  'app/(authenticated)/demo/many-to-many-ui/grok/RelationshipMaker.tsx',
  'app/(authenticated)/entity-crud/[entityName]/[primaryKeyField]/page.tsx',
  'app/(authenticated)/layout.tsx', 'app/(authenticated)/tests/dynamic-layouts/grid-demo/GridLayout.tsx',
  'app/(authenticated)/tests/fetch-test/useConversationMessages.ts',
  'app/(authenticated)/tests/matrx-table/components/StandardTabUtil.ts',
  'app/(authenticated)/tests/relationship-management/entity-json-builder/EntityJsonBuilderWithSelect.tsx',
  'app/(authenticated)/tests/relationship-management/entity-json-builder/async-direct-create/page.tsx',
  'app/(authenticated)/tests/relationship-management/entity-json-builder/async-sequential-create/page.tsx',
  'app/(authenticated)/tests/relationship-management/entity-json-builder/page.tsx',
  'app/(authenticated)/tests/relationship-management/metadata-test/RelationshipDetailsCard.tsx',
  'app/(authenticated)/tests/relationship-management/metadata-test/info-header.tsx',
  'app/(authenticated)/tests/relationship-management/metadata-test/page.tsx',
  'app/(authenticated)/tests/relationship-management/rel-with-fetch-test/ChildRecordCard.tsx',
  'app/(authenticated)/tests/relationship-management/rel-with-fetch-test/EntityJsonBuilder.tsx',
  'app/LiteProviders.tsx', 'app/Providers.tsx', 'app/api/admin/prompt-builtins/route.ts',
  'app/api/admin/prompt-shortcuts/[id]/route.ts', 'app/api/admin/prompt-shortcuts/route.ts',
  'app/api/admin/shortcut-categories/[id]/route.ts', 'app/api/admin/shortcut-categories/route.ts',
  'app/entities/dynamic-options/types.ts', 'app/entities/fields/field-components/EntityRelationshipInput copy.tsx',
  'app/entities/forms/EntityFormAnyRecordWithRelated.tsx', 'app/entities/forms/EntityFormCustomMinimal.tsx',
  'app/entities/forms/EntityFormRecordSelections.tsx', 'app/entities/forms/EntitySheetForm.tsx',
  'app/entities/forms/form-helpers/EntityFormFooter.tsx',
  'app/entities/hooks/crud/by-entity/useConversationCrud.ts',
  'app/entities/hooks/crud/useCreateUpdateRecord.ts',
  'app/entities/hooks/crud/useDeleteRecord.ts',
  'app/entities/hooks/crud/useDirectRelCreate.ts',
  'app/entities/hooks/crud/useDirectUpdateRecord.ts',
  'app/entities/hooks/crud/useSequentialCreate.ts',
  'app/entities/hooks/crud/useSequentialCreateWithIds.ts',
  'app/entities/hooks/crud/useSequentialDelete.ts',
  'app/entities/hooks/crud/useStartCreate.ts',
  'app/entities/hooks/crud/useUpdateRecord.ts',
  'app/entities/hooks/records/useGetOrFetch.ts',
  'app/entities/hooks/relationships/definitionConversionUtil.ts',
  'app/entities/hooks/relationships/dev/sampleRelatedCreate.ts',
  'app/entities/hooks/relationships/dev/useStableChildRecords.ts',
  'app/entities/hooks/relationships/dev/useStableJoinRecords.ts',
  'app/entities/hooks/relationships/new/useStableRelationships.ts',
  'app/entities/hooks/relationships/relationshipDefinitions.ts',
  'app/entities/hooks/relationships/useActiveJoinedRecords.ts',
  'app/entities/hooks/relationships/useCoreJoinedRecords.ts',
  'app/entities/hooks/relationships/useProcessedRelatedRecords.ts',
  'app/entities/hooks/relationships/useRelationshipMapper.ts',
  'app/entities/hooks/relationships/useRelationships.ts',
  'app/entities/hooks/relationships/useRelationshipsWithProcessing.ts',
  'app/entities/hooks/relationships/utils.ts',
  'app/entities/hooks/unsaved-records/useCreateRecord.ts',
  'app/entities/hooks/unsaved-records/useDirectCreate.ts',
  'app/entities/hooks/unsaved-records/useStartCreateRecord.ts',
  'app/entities/hooks/unsaved-records/useTrackedCreateRecord.ts',
  'app/entities/hooks/unsaved-records/useTrackedUnsavedRecord.ts',
  'app/entities/hooks/unsaved-records/useUnsavedJoinedRecords.ts',
  'app/entities/hooks/unsaved-records/useUnsavedRecord.ts',
  'app/entities/hooks/unsaved-records/useUnsavedRelatedRecords.ts',
  'app/entities/hooks/unsaved-records/useUpdateFields.ts',
  'app/entities/layout/EntityCreateRecordSheet.tsx',
  'app/entities/layout/EntityRecordSheet.tsx',
  'app/entities/quick-reference/QuickRefMultiSelect.tsx',
  'app/entities/quick-reference/QuickRefSearchableSelect.tsx',
  'app/entities/quick-reference/QuickRefSelectFloatingLabel.tsx',
  'app/entities/quick-reference/QuickRefSelectNoUpdates.tsx',
  'app/entities/quick-reference/SelectActiveRecord.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefActiveRecordSelect.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefActiveSelectCreate.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefCommandIcon.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefSearchableSelect.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefSelect.tsx',
  'app/entities/quick-reference/dynamic-quick-ref/QuickRefSelectFindNew.tsx',
  'app/entities/relationships/EntityRelationshipWrapperFinal.tsx',
  'app/entities/relationships/QuickRefRelatedRecordSelect.tsx',
  'app/entities/relationships/RelatedEntityAccordionFinal.tsx',
  'components/DirectoryTree/DirectoryItemRenderers.tsx',
  'components/animated/demos/bento-grids/BentoGridExampleThree.tsx',
  'components/flashcard-app/components/SmartFlashcardControls/FlashcardSelect.tsx',
  'components/layout/MatrxLayout.tsx',
  'components/layout/MatrxLayoutDirect.tsx',
  'components/layout/extras/layoutNew.tsx',
  'components/mardown-display/blocks/brokers/MatrxBrokerBlock.tsx',
  'components/mardown-display/blocks/brokers/MatrxBrokerUpdater.tsx',
  'components/matrx/ArmaniForm/EntityBaseField.tsx',
  'components/matrx/ArmaniForm/action-system/presentation/common.tsx',
  'components/matrx/ArmaniForm/field-components/EntityRelationshipInput.tsx',
  'components/matrx/Entity/form/EntityFormWrapper.tsx',
  'components/matrx/Entity/prewired-components/entity-management/EntitySelection.tsx',
  'components/matrx/Entity/prewired-components/layouts/EntityHeader.tsx',
  'components/matrx/Entity/prewired-components/layouts/smart-layouts/smart-actions/core-buttons/SmartAdvancedButton.tsx',
  'components/matrx/Entity/records/PreWiredEntityRecordHeader.tsx',
  'components/matrx/LightSwitchToggle.tsx',
  'components/matrx/MultiSwitchToggle.tsx',
  'components/matrx/SelectWithIconDisplay.tsx',
  'components/matrx/navigation/module-header/Breadcrumbs.tsx',
  
  // Batches 11-15 (ULTRA run)
  'components/playground/brokers/BrokerDisplayCard.tsx',
  'components/playground/brokers/BrokerRecordsSimple.tsx',
  'components/playground/brokers/dev/BrokerRecords.tsx',
  'components/playground/brokers/dev/BrokerRecordsOld.tsx',
  'components/playground/brokers/dev/BrokersDisplayColumn.tsx',
  'components/playground/brokers/dev/ChipHeader.tsx',
  'components/playground/brokers/dev/EntityBrokerCardNew.tsx',
  'components/playground/components/dynamic-two/MessageToolbar.tsx',
  'components/playground/header/PlaygroundNavContainer.tsx',
  'components/playground/hooks/brokers/useChipHandlers.ts',
  'components/playground/hooks/brokers/useExtractEncodedBrokers.ts',
  'components/playground/hooks/brokers/useMessageBrokers.ts',
  'components/playground/hooks/dev/useActiveRecipe.ts',
  'components/playground/hooks/dev/useAiAgents.ts',
  'components/playground/hooks/dev/useAiSettings.ts',
  'components/playground/hooks/dev/useMessageDeletion.ts',
  'components/playground/hooks/dev/useMessageTemplates.ts',
  'components/playground/hooks/dev/useMessageWithNew.ts',
  'components/playground/hooks/dev/useRecipe.ts',
  'components/playground/hooks/dev/useRecipeMessages.ts',
  'components/playground/hooks/dev/useSynchronizedAiAgents.ts',
  'components/playground/hooks/messages/useAddMessage.ts',
  'components/playground/hooks/recipes/recipe-task-utils.ts',
  'components/playground/hooks/recipes/useCompileRecipe.ts',
  'components/playground/hooks/useAiCockpit.ts',
  'components/playground/messages/AdminToolbar.tsx',
  'components/playground/messages/EmptyMessagesCard.tsx',
  'components/playground/messages/MessageEditor.tsx',
  'components/playground/messages/MessageToolbar.tsx',
  'components/playground/messages/MessagesContainer.tsx',
  'components/playground/messages/dynamic/DebugPanelWrapper.tsx',
  'components/playground/messages/dynamic/MessageEditorWrapper.tsx',
  'components/playground/messages/dynamic/MessageToolbar.tsx',
  'components/playground/messages/dynamic/container.tsx',
  'components/playground/messages/types.ts',
  'components/playground/settings/NewSettingsCard.tsx',
  'components/ssr/select/app-data-select.tsx',
  'features/applet/builder/modules/field-builder/previews/FieldContainerPreview.tsx',
  'features/applet/builder/parts/AppletLayoutIntroCard.tsx',
  'features/applet/builder/previews/LiveAppAndAppletPreview.tsx',
  'features/applet/common/applet-routing-helpers/AppletNavButton.tsx',
  'features/applet/common/applet-routing-helpers/applet-params.ts',
  'features/applet/common/applet-routing-helpers/useAppletNavigation.ts',
  'features/applet/constants/layout-options.tsx',
  'features/applet/demo/AppDemoManager.tsx',
  'features/applet/runner/AppletRunComponent.tsx',
  'features/applet/runner/fields/core/FieldsWithlabels.tsx',
  'features/applet/runner/header/common/ButtonMenu.tsx',
  'features/applet/runner/header/common/HeaderButtons.tsx',
  'features/applet/runner/header/desktop/HeaderLogic.tsx',
  'features/applet/runner/layouts/AppletLayoutManager.tsx',
  'features/applet/runner/layouts/core/ContainerFieldRenderer.tsx',
  'features/applet/runner/response/ResponseLayoutManager.tsx',
  'features/canvas/social/ScoreSubmissionDialog.tsx',
  'features/chat/components/input/InputBottomControls.tsx',
  'features/chat/components/input/ModelSelection.tsx',
  'features/chat/components/input/mobile/MobileInputBottomControls.tsx',
  'features/chat/hooks/useInputControls.ts',
  'features/prompts/components/results-display/PromptRunner.types.ts',
  'features/prompts/examples/index.tsx',
  'features/prompts/hooks/usePrompts.ts',
  'features/rich-text-editor/components/ColorSelection.tsx',
  'features/rich-text-editor/utils/ChipUpdater.ts',
  'features/rich-text-editor/utils/chipFilnder.ts',
  'features/rich-text-editor/utils/enhancedChipUtils.ts',
  'features/workflows-xyflow/node-editor/tabs/NodeDefinitionTab.tsx',
  'features/workflows-xyflow/utils/node-utils.ts',
  'features/workflows/hooks/useDataOutputComponent.ts',
  'features/workflows/react-flow/nodes/NodeWrapper.tsx',
  'features/workflows/utils/data-flow-manager.ts',
  'hooks/ai/chat/unused/useChatInput.ts',
  'hooks/ai/chat/unused/useChatStorage.ts',
  'hooks/ai/chat/unused/useChatSubmission.ts',
  'hooks/ai/chat/unused/useConversationCreateUpdate.ts',
  'hooks/ai/chat/unused/usePromptInput.ts',
  'hooks/ai/chat/useChatBasics.ts',
  'hooks/ai/chat/useConversationRouting.ts',
  'hooks/aiCockpit/newMessageRecordering.ts',
  'hooks/aiCockpit/useMessageReordering.ts',
  'hooks/aiCockpit/useProcessedRecipeMessages.ts',
  'hooks/aiCockpit/useRecipeAgentSettings.ts',
  'hooks/applets/useCreateAssociatedValueBrokers.ts',
  'hooks/applets/useValueBroker.ts',
  'hooks/applets/useValueBrokers.ts',
  'hooks/run-recipe/types.ts',
  'hooks/run-recipe/useCompiledRecipe.ts',
  'hooks/run-recipe/usePrepareRecipeToRun.ts',
  'hooks/run-recipe/useRunRecipeVersionSelection.ts',
  'hooks/useToastManager.tsx',
  'lib/ai/adapters/anthropicAdapter.ts',
  'lib/redux/app-builder/service/customAppletService.ts',
  'lib/redux/entity/concepts/paramEntitySelectors.ts',
  'lib/redux/entity/concepts/paramSelectors.ts',
  'lib/redux/entity/custom-selectors/chatSelectors.ts',
  'lib/redux/entity/hooks/entity-main-hooks.ts',
  'lib/redux/entity/hooks/entityMainHooks.ts',
  'lib/redux/entity/hooks/functions-and-args.ts',
  'lib/redux/entity/hooks/useAllData.ts',
  'lib/redux/entity/hooks/useCreateManyToMany.ts',
  'lib/redux/entity/hooks/useEntityFetch.ts',
]);

const remaining = singleErrorFiles.filter(f => !allProcessed.has(f));

console.log(`Total TS2307 files: ${singleErrorFiles.length}`);
console.log(`Processed: ${allProcessed.size}`);
console.log(`Remaining for FINAL VICTORY: ${remaining.length}\n`);

console.log('=== FINAL BATCH - Complete TS2307 Cleanup! ===\n');
remaining.forEach((f, i) => console.log(`${i+1}. ${f}`));
