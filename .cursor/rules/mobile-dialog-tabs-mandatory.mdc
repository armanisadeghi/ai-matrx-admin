---
description: MANDATORY mobile patterns for dialogs and tabs - these rules are non-negotiable for iOS-native UX
alwaysApply: true
---

# üö® MANDATORY: Mobile Dialog & Tabs Patterns

## STOP! Before You Create ANY Dialog or Form

**Ask yourself these questions:**

1. ‚ùì Am I creating a Dialog/Modal?
   - ‚úÖ **YES** ‚Üí You MUST use the Dialog/Drawer conditional pattern below
   - ‚ùå **NO Dialog on mobile** ‚Üí Only Drawer (bottom sheet)

2. ‚ùì Does my form/content have tabs?
   - ‚úÖ **Desktop ONLY** ‚Üí Tabs are fine (max 5 recommended)
   - ‚ùå **Mobile** ‚Üí NEVER tabs, always vertical stacking

---

## Rule #1: Dialog = Desktop, Drawer = Mobile

**ALWAYS use `useIsMobile()` to conditionally render:**

```tsx
import { useIsMobile } from "@/hooks/use-mobile";
import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog";
import { Drawer, DrawerContent, DrawerTitle } from "@/components/ui/drawer";

function MyComponent() {
  const isMobile = useIsMobile();
  const [isOpen, setIsOpen] = useState(false);
  
  // Mobile: Bottom sheet drawer
  if (isMobile) {
    return (
      <Drawer open={isOpen} onOpenChange={setIsOpen}>
        <DrawerContent className="max-h-[85dvh]">
          <DrawerTitle className="sr-only">Title Here</DrawerTitle>
          <div className="flex-1 overflow-y-auto overscroll-contain pb-safe">
            {/* Your content */}
          </div>
        </DrawerContent>
      </Drawer>
    );
  }
  
  // Desktop: Traditional modal dialog
  return (
    <Dialog open={isOpen} onOpenChange={setIsOpen}>
      <DialogContent className="max-w-[95vw] w-full lg:max-w-[1400px] max-h-[90dvh] overflow-hidden flex flex-col">
        <DialogHeader><DialogTitle>Title Here</DialogTitle></DialogHeader>
        <div className="flex-1 overflow-y-auto">{/* Your content */}</div>
      </DialogContent>
    </Dialog>
  );
}
```

### Key Configuration Values

| Element | Value | Purpose |
|---------|-------|---------|
| **Drawer** | `max-h-[85dvh]` | Leaves room for status bar & safe areas |
| **Dialog** | `max-h-[90dvh]` | Prevents overflow on desktop |
| **Content** | `overflow-y-auto` | Enables smooth scrolling |
| **Content** | `overscroll-contain` | Prevents bounce-to-parent (mobile) |
| **Content** | `pb-safe` | Respects iPhone home indicator |

---

## Rule #2: Tabs = Desktop Only

**NEVER use tabs on mobile. Period.**

### Why?
1. **UX Friction** - Horizontal navigation on mobile is clunky
2. **Nested Scrolling** - Creates scroll trapping (user gets stuck)
3. **Hidden Content** - Users may not discover all tabs
4. **Not iOS-Native** - iOS apps don't use horizontal tab navigation in modals

### Mobile: Vertical Stacking Pattern

```tsx
import { useIsMobile } from "@/hooks/use-mobile";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";

function MyForm() {
  const isMobile = useIsMobile();
  const [activeTab, setActiveTab] = useState("basic");
  
  // Mobile: All sections stacked vertically
  if (isMobile) {
    return (
      <div className="space-y-6 p-4">
        {/* Section 1 */}
        <div className="space-y-4">
          <h3 className="text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2">
            <div className="h-6 w-1 bg-primary rounded-full" />
            Basic Info
          </h3>
          {/* Section 1 content here */}
        </div>
        
        {/* Section 2 */}
        <div className="space-y-4 pt-4 border-t border-border">
          <h3 className="text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2">
            <div className="h-6 w-1 bg-primary rounded-full" />
            Advanced Settings
          </h3>
          {/* Section 2 content here */}
        </div>
        
        {/* Section 3 */}
        <div className="space-y-4 pt-4 border-t border-border">
          <h3 className="text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2">
            <div className="h-6 w-1 bg-primary rounded-full" />
            Configuration
          </h3>
          {/* Section 3 content here */}
        </div>
        
        {/* Actions at bottom */}
        <div className="flex flex-col gap-3 pt-4 border-t border-border pb-safe">
          <Button className="w-full">Save</Button>
          <Button variant="outline" className="w-full">Cancel</Button>
        </div>
      </div>
    );
  }
  
  // Desktop: Tabs are fine
  return (
    <Tabs value={activeTab} onValueChange={setActiveTab}>
      <TabsList className="grid w-full grid-cols-3">
        <TabsTrigger value="basic">Basic Info</TabsTrigger>
        <TabsTrigger value="advanced">Advanced</TabsTrigger>
        <TabsTrigger value="config">Configuration</TabsTrigger>
      </TabsList>
      <TabsContent value="basic">{/* Section 1 content */}</TabsContent>
      <TabsContent value="advanced">{/* Section 2 content */}</TabsContent>
      <TabsContent value="config">{/* Section 3 content */}</TabsContent>
    </Tabs>
  );
}
```

### Mobile Stacking Features

- ‚úÖ **Colored accent bars** (`h-6 w-1 bg-primary`) for visual hierarchy
- ‚úÖ **Border separators** (`border-t border-border`) between sections
- ‚úÖ **All content visible** via natural scrolling
- ‚úÖ **Full-width buttons** at bottom
- ‚úÖ **Safe area respect** (`pb-safe`)
- ‚úÖ **Single scroll area** (no nested scrolling)

---

## Rule #3: Avoid Nested Scrolling

**NEVER nest scroll areas on mobile:**

```tsx
// ‚ùå BAD - Nested scrolling (scroll trapping)
<div className="overflow-y-auto">
  <Tabs>
    <TabsContent>
      <div className="overflow-y-auto max-h-[300px]">
        {/* User gets trapped here */}
      </div>
    </TabsContent>
  </Tabs>
</div>

// ‚úÖ GOOD - Single scroll area
<div className="overflow-y-auto">
  <div className="space-y-4">
    {/* All content flows naturally */}
  </div>
</div>
```

---

## Quick Checklist

Before submitting ANY dialog or form code:

- [ ] Used `useIsMobile()` hook for conditional rendering
- [ ] Mobile uses `Drawer` (not Dialog)
- [ ] Desktop uses `Dialog` (not Drawer)
- [ ] Drawer has `max-h-[85dvh]`
- [ ] Drawer content has `overflow-y-auto overscroll-contain pb-safe`
- [ ] Dialog has `max-h-[90dvh]`
- [ ] Mobile: No tabs, content stacked vertically
- [ ] Desktop: Tabs OK (max 5 recommended)
- [ ] No nested scrolling areas
- [ ] Section headers have colored accent bars on mobile
- [ ] Action buttons are full-width on mobile
- [ ] All inputs have `text-base` and `style={{ fontSize: '16px' }}`

---

## Examples in Codebase

See these files for reference implementations:

1. **`components/layout/FeedbackButton.tsx`** - Perfect example of Dialog/Drawer conditional
2. **`components/admin/McpToolsManager.tsx`** - Multiple dialogs with tab-to-stack conversion
3. **`components/admin/ToolUiComponentEditor.tsx`** - 5-tab form converted to vertical stacking

---

## Why This Matters

**iOS-Native UX:** These patterns make the web app feel like a native iOS app, not a desktop site squeezed onto a phone.

**User Experience:**
- ‚úÖ Natural gestures (swipe to dismiss drawers)
- ‚úÖ Familiar patterns (bottom sheets like iOS)
- ‚úÖ Smooth scrolling (no scroll trapping)
- ‚úÖ Clear navigation (vertical flow is intuitive)
- ‚úÖ Safe area respect (no content behind notch/home indicator)

**Developer Experience:**
- ‚úÖ Consistent patterns across the app
- ‚úÖ Easy to implement (copy-paste templates)
- ‚úÖ Future-proof (works on all iOS devices)
- ‚úÖ Maintainable (clear separation of mobile/desktop)

---

## Final Word

**These patterns are MANDATORY, not suggestions.**

Every dialog and form in the application must follow these patterns. No exceptions.

If you're unsure, refer to:
- This file (quick reference)
- `.cursor/skills/ios-mobile-first/SKILL.md` (comprehensive guide)
- Existing implementations (FeedbackButton, McpToolsManager)
