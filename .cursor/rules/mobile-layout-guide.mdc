---
description: Mobile Layout Guidelines
alwaysApply: false
---
# AI Matrx Mobile Layout Reference

## Custom Utilities (`globals.css`)

### Dynamic Viewport Units
```css
.h-dvh          /* height: 100dvh */
.min-h-dvh      /* min-height: 100dvh */
.max-h-dvh      /* max-height: 100dvh */
```

### Safe Area Insets
```css
.pb-safe        /* padding-bottom: env(safe-area-inset-bottom, 1rem) */
.mb-safe        /* margin-bottom: env(safe-area-inset-bottom, 1rem) */
```

### Header Height Variables
```css
--header-height: 2.5rem    /* Unified for both mobile and desktop */
```

## Layout Component Heights

- **MobileLayout.tsx**: `h-10` (2.5rem)
- **DesktopLayout.tsx**: `h-10` (2.5rem)
- **app/layout.tsx**: `h-dvh` on body

## Required Patterns

### Full-Screen Layouts
```tsx
<div className="h-dvh flex flex-col">
  <div className="flex-shrink-0">{/* Header */}</div>
  <div className="flex-1 overflow-y-auto pb-safe">{/* Content */}</div>
  <div className="flex-shrink-0 pb-safe">{/* Fixed bottom */}</div>
</div>
```

### Standard Scrollable Pages
```tsx
<div className="min-h-dvh">
  {/* Content */}
</div>
```

### Fixed Bottom Elements
```tsx
<div className="fixed bottom-0 left-0 right-0 pb-safe">
  {/* Always use pb-safe */}
</div>
```

### Content Below Header
```tsx
<div className="h-[calc(100dvh-2.5rem)]">
  {/* Full height minus header */}
</div>

<div className="h-[calc(100dvh-var(--header-height))]">
  {/* Using CSS variable (recommended) */}
</div>
```

### Header Content Injection
```tsx
import { PageSpecificHeader } from '@/components/layout/new-layout/PageSpecificHeader';

<PageSpecificHeader>
  {/* Portaled into #page-specific-header-content */}
</PageSpecificHeader>
```

## Mandatory Rules

1. **Never use `h-screen` or `min-h-screen`** → Use `h-dvh`, `min-h-dvh`, or `h-page`
2. **All fixed bottom elements require `pb-safe`** → No exceptions
3. **Never hardcode header heights** → Use Tailwind classes or `--header-height`
4. **Full-height containers must use `dvh`** → Not `vh`
5. **Use `h-page` for full-height pages** → Automatically accounts for header using `dvh`
6. **Input/textarea font-size must be ≥16px** → Prevents iOS auto-zoom (inline `style={{ fontSize: '16px' }}` or `text-base`)
7. **Viewport config**: `maximumScale: 1`, `userScalable: false` → In `app/config/viewport.ts`
8. **Never create custom headers** → Use `PageSpecificHeader` component for header injection